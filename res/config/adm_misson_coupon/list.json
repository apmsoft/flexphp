{
    "validation": {
        "page": {
            "title"   : "페이지",
            "required": true,
            "filter"  : "chkNumber"
        },
        "misson_token": {
            "title"   : "미션토큰",
            "required": true,
            "filter"  : "chkEngNumUnderline"
        }
    },

    "authority" : "{__FUNC__.chk_authority}({_DEFINE._AUTH_SUPERADMIN_LEVEL})",

    "model": {
        "page_limit"        : 10,
        "page_block_count"  : 5,
        "page"              : "{__REQ__.page}"
    },

    "data":{
        "total_record" : {
            "query"  : "{__QUERIES__.total_record}",
            "query_type": "single",
            "scheme" : null,
            "params" : {
                "columns": "id",
                "table"  : "{__TABLES__.coupon}",
                "where"  : {
                    "__FIELD__": "title",
                    "__Q__": "{__REQ__.q}"
                }
            },
            "outmsg" : null
        },

        "list" :{
            "query"  : "{__QUERIES__.loop_query}",
            "query_type": "multiple",
            "scheme" : null,
            "params" : {
                "columns": "id,number,title,start_date,end_date,ea",
                "table"  : "{__TABLES__.coupon}",
                "where"  : {
                    "__FIELD__": "number+title",
                    "__Q__": "{__REQ__.q}"
                },
                "orderby": "`id` DESC",
                "limit"  : "{__FUNC__.limit}({__DATA__.total_record.count},{__REQ__.page},{__MODEL__.page_limit},{__MODEL__.page_block_count})"
            },
            "outmsg" : null,
            "then" : null
        },

        "couponin" :{
            "query"  : "{__QUERIES__.loop_query}",
            "query_type": "multiple",
            "scheme" : null,
            "params" : {
                "columns": "couponno",
                "table"  : "{__TABLES__.misson_coupon}",
                "where"  : {
                    "misson_token" : {
                        "condition": " = ",
                        "value"    : "{__REQ__.misson_token}",
                        "coord"    : "AND"
                    }
                },
                "orderby": "`id` DESC",
                "limit"  : 100
            }
        }
    },

    "output": {
        "result"      : "true",
        "page"        : "{__REQ__.page}",
        "total_page"  : "{__MODEL__.totalPage}",
        "total_record": "{__DATA__.total_record.count}",
        "paging"      : "{__MODEL__.paging_relation}",
        "q"           : "{__REQ__.q}",
        "strings_filters" : "{__DATA__.couponin.fetch()}",
        "msg"         : "{__DATA__.list.fetch()}"
    }
}