{
    "validation": {
        "page": {
            "title"   : "페이지",
            "required": true,
            "filter"  : "chkNumber"
        }
    },

    "authority" : "{__FUNC__.chk_authority}({_DEFINE._AUTH_SUPERADMIN_LEVEL})",

    "model": {
        "page_limit"        : 10,
        "page_block_count"  : 5,
        "page"              : "{__REQ__.page}",
        "field" : "title"
    },

    "data":{
        "headline" :{
            "query"  : "{__QUERIES__.loop_query}",
            "query_type": "multiple",
            "scheme" : {
                "title" : {
                    "title" : "제목"
                },
                "signdate" : {
                    "title" : "등록일",
                    "value" : "{__FUNC__.timetodatetime}({__DATA__.signdate})"
                }
            },
            "params" : {
                "columns": "id,category,headline,title,signdate,extract_id",
                "table"  : "{__TABLES__.notice}",
                "where"  : {
                    "__FIELD__": "{__MODEL__.field}",
                    "__Q__": "{__REQ__.q}",
                    "category" : {
                        "condition": " = ",
                        "value"    : "{__REQ__.category}",
                        "coord"    : "AND"
                    },
                    "headline" : {
                        "condition": " = ",
                        "value"    : "y",
                        "coord"    : "AND"
                    }
                },
                "orderby": "id DESC",
                "limit"  : "100"
            },
            "outmsg" : null,
            "then" : {
                "upfiles" : {
                    "query"  : "{__QUERIES__.single_query}",
                    "query_type": "single",
                    "scheme" : null,
                    "params" : {
                        "columns": "id,file_type,directory,sfilename",
                        "table"  : "{__TABLES__.uploadfiles}",
                        "where"  : {
                            "extract_id": {
                                "condition": " = ",
                                "value"    : "{__DATA__.extract_id}",
                                "coord"    : "AND"
                            },
                            "is_regi": {
                                "condition": " = ",
                                "value"    : "1",
                                "coord"    : "AND"
                            }
                        }
                    }
                }
            }
        },

        "total_record" : {
            "query"  : "{__QUERIES__.total_record}",
            "query_type": "single",
            "scheme" : null,
            "params" : {
                "columns": "id",
                "table"  : "{__TABLES__.notice}",
                "where"  : {
                    "__FIELD__": "{__MODEL__.field}",
                    "__Q__": "{__REQ__.q}",
                    "category" : {
                        "condition": " = ",
                        "value"    : "{__REQ__.category}",
                        "coord"    : "AND"
                    }
                }
            },
            "outmsg" : null
        },

        "list" :{
            "query"  : "{__QUERIES__.loop_query}",
            "query_type": "multiple",
            "scheme" : {
                "category": {
                    "title" :"카테고리",
                    "value" : "{__FUNC__.getValueInArray}({__ARRAY__.notice_category},{__DATA__.category})"
                },
                "title" : {
                    "title" : "제목"
                },
                "signdate" : {
                    "title" : "등록일",
                    "value" : "{__FUNC__.date}({__TEXT__.Y-m-d},{__DATA__.signdate})"
                }
            },
            "params" : {
                "columns": "id,title,headline,category,signdate,extract_id",
                "table"  : "{__TABLES__.notice}",
                "where"  : {
                    "__FIELD__": "{__MODEL__.field}",
                    "__Q__": "{__REQ__.q}",
                    "category" : {
                        "condition": " = ",
                        "value"    : "{__REQ__.category}",
                        "coord"    : "AND"
                    }
                },
                "orderby": "id DESC",
                "limit"  : "{__FUNC__.limit}({__DATA__.total_record.count},{__REQ__.page},{__MODEL__.page_limit},{__MODEL__.page_block_count})"
            },
            "outmsg" : null,
            "then" : {
                "upfiles" : {
                    "query"  : "{__QUERIES__.single_query}",
                    "query_type": "single",
                    "scheme" : null,
                    "params" : {
                        "columns": "id,file_type,directory,sfilename",
                        "table"  : "{__TABLES__.uploadfiles}",
                        "where"  : {
                            "extract_id": {
                                "condition": " = ",
                                "value"    : "{__DATA__.extract_id}",
                                "coord"    : "AND"
                            },
                            "is_regi": {
                                "condition": " = ",
                                "value"    : "1",
                                "coord"    : "AND"
                            }
                        }
                    }
                }
            }
        }
    },

    "output": {
        "result"       : "true",
        "page"         : "{__REQ__.page}",
        "total_page"   : "{__MODEL__.totalPage}",
        "total_record" : "{__DATA__.total_record.count}",
        "paging"       : "{__MODEL__.paging_relation}",
        "q"            : "{__REQ__.q}",
        "category"     : "{__REQ__.category}",
        "category_navi": "{__ARRAY__.notice_category}",
        "scheme"       : "{__SCHEME__.list}",
        "field"        : "{__MODEL__.field}",
        "headline"     : "{__DATA__.headline.fetch()}",
        "msg"          : "{__DATA__.list.fetch()}"
    }
}