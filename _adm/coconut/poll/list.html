<script type="text/template" id="tpl_poll_listview">

    <div class="container-fluid" style="padding: 10px 0px;">
        <div class="row">
            <div class="col-6">
              <button type="button" id="btn_add" class="btn btn-primary button_circle"><i class="fa fa-plus"></i></button>
            </div>
            <div class="col-6" style="text-align: right;">
              
            </div>
        </div>
        <!--검색-->
        <form id="thePollListViewForm">
            <div class="input-group">          
              <input type="search" class="form-control" name="q" id="q" value="<%-q%>" title="검색어" placeholder="검색어를 입력하세요.">
              <span class="input-group-btn">
                <button type="submit" class="btn btn-info"><i class="fa fa-search"></i> 검색</button>
              </span>
            </div>
        </form>
    
        <!--카테고리-->
        <%if(typeof(category_navi) !== "undefined") { %>
        <ul class="nav nav-pills" style="padding:10px 0 0 0;">
          <% _.each(category_navi, function(category_navi_title, category_key, value) { 
            var _cate_active = (category == category_key) ? "active" : "";
          %>
          <li class="nav-item">
            <a class="nav-link category-link <%-_cate_active%>" data-id="<%-category_key%>" href="javascript://void(0);"><%-category_navi_title%></a>
          </li>
          <%}); %>

        </ul>
        <% } %>
    </div>
    <div class="col-xs-12"><small>전체 : <%-total_record%> (<%-page%>/<%-total_page%>페이지)</small></div>
    <div class="table-responsive noSwipe">
      <table class="table table-hover table-bordered table-striped">
        <thead>
          <tr>
            <th>타이틀</th>
            <th>기간</th>
            <th>문항</th>
            <th>참여/예상참여</th>
            <th>항목</th>
            <th>결과</th>
            <th colspan="2">Edit/Del</th>
          </tr>
        </thead>
        <tbody>
        <%
        _.each(msg, function(list)
        {
          var apercent = list.a_count/list.epa_total*100;
        %>
          <tr>
            <th scope="row">
              <%
              if(list.is_print == 'y'){
              %>
              <button type="button" class="btn btn-primary btn-sm">진행중</button>
              <%
              } else {
              %>
              <button type="button" class="btn btn-warning btn-sm">완료</button>
              <% } %>
              <br />
              <%-list.title%>
            </th>
            <td><%-list.start_date%><br /><%-list.end_date%></td>
            <td><%-list.q_count%></td>
            <td>
              <%-list.a_count%>/<%-list.epa_total%>
              <div class="progress" style="margin-top:5px;">
                <div class="progress-bar" role="progressbar" style="width: <%-apercent%>%;" aria-valuenow="<%-apercent%>" aria-valuemin="0" aria-valuemax="100"><%-apercent%>%</div>
              </div>
            </td>
            <td>
              <button type="button" class="btn btn-primary btn-sm btn_item_list" data-id="<%-list.id%>" title="결과/항목관리">
                <i class="fa fa-bars"></i>
              </button> 
            </td>
            <td>
              <button type="button" class="btn btn-success btn-sm btn_item_log_list" data-id="<%-list.id%>" title="결과">
                <i class="far fa-chart-bar"></i>
              </button> 
            </td>            
            <td>
              <button type="button" class="btn btn-info btn-sm btn_edit" data-id="<%-list.id%>" title="수정">
                <i class="far fa-edit"></i>
              </button>
            </td>
            <td>
              <button type="button" class="btn btn-danger btn-sm btn_delete" data-id="<%-list.id%>" title="삭제">
                <i class="fa fa-trash"></i>
              </button>
            </td>
          </tr>
        <%});%>
        </tbody>
      </table>
    </div>
    
    <!--paging chanel-->
    <nav aria-label="Page navigation" style="padding:20px 0;">
      <ul class="pagination justify-content-center">
        <%if(paging.pre>0){%>
        <li class="page-item">
          <a class="page-link" href="javascript:void(0);" data-page="<%-paging.pre%>" tabindex="-1" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
            <span class="sr-only"><<</span>
          </a>
        </li>
         <%}%>
         <% _.each(paging.chanel, function(paging){
            var page_active = (page == paging.num) ? 'active' : '';
         %>
        <li class="page-item <%-page_active%>">
          <a class="page-link" href="javascript:void(0);" data-page="<%-paging.num%>"><%-paging.num%></a>
        </li>
        <%});%>
        <%if(paging.next>0){%>
        <li class="page-item">
          <a class="page-link" href="javascript:void(0);" data-page="<%-paging.next%>" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
            <span class="sr-only">>></span>
          </a>
        </li>
         <%}%>
      </ul>
    </nav>
</script>